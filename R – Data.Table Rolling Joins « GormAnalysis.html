<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0051)http://gormanalysis.com/r-data-table-rolling-joins/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" hc="a3" style=""><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>R – Data.Table Rolling Joins «  GormAnalysis</title>

<link rel="stylesheet" href="./R – Data.Table Rolling Joins « GormAnalysis_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="GormAnalysis RSS Feed" href="http://gormanalysis.com/feed/">
<link rel="alternate" type="application/atom+xml" title="GormAnalysis Atom Feed" href="http://gormanalysis.com/feed/atom/">
<link rel="pingback" href="http://gormanalysis.com/xmlrpc.php">
<script type="text/javascript" async="" src="./R – Data.Table Rolling Joins « GormAnalysis_files/ga.js"></script><script type="text/javascript" src="./R – Data.Table Rolling Joins « GormAnalysis_files/required.js"></script>
<!--[if IE]><link rel="stylesheet" href="http://gormanalysis.com/wp-content/themes/flow/ie.css" type="text/css" media="screen" /><![endif]-->
<link rel="alternate" type="application/rss+xml" title="GormAnalysis » R – Data.Table Rolling Joins Comments Feed" href="http://gormanalysis.com/r-data-table-rolling-joins/feed/">
<link rel="stylesheet" id="easy_table_style-css" href="./R – Data.Table Rolling Joins « GormAnalysis_files/style(1).css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://gormanalysis.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://gormanalysis.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="R – Introduction to Data.Table Joins" href="http://gormanalysis.com/r-introduction-to-data-table-joins/">
<link rel="next" title="Decision Trees in R using rpart" href="http://gormanalysis.com/decision-trees-in-r-using-rpart/">
<meta name="generator" content="WordPress 4.0.1">
<link rel="canonical" href="./R – Data.Table Rolling Joins « GormAnalysis_files/R – Data.Table Rolling Joins « GormAnalysis.html">
<link rel="shortlink" href="http://gormanalysis.com/?p=176">
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-41240507-2']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<link rel="stylesheet" type="text/css" href="./R – Data.Table Rolling Joins « GormAnalysis_files/shCore.css"><link rel="stylesheet" type="text/css" href="./R – Data.Table Rolling Joins « GormAnalysis_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>

<style class="winnerfm-style">.freefl-overlay{
    cursor: pointer;
    background-color: #3c3c3c;
    text-align: left;
    margin: 0px;
    padding: 0px;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5Mjc5OWJhMS1jNzIwLTE5NGEtYTc1Ny1jNWIxODYyNTE2ZTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEyQjEzQkZENTAyMTFFM0I2ODg5NjQ1MjUxOERCMjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEyQjEzQkVENTAyMTFFM0I2ODg5NjQ1MjUxOERCMjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkyNzk5YmExLWM3MjAtMTk0YS1hNzU3LWM1YjE4NjI1MTZlNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Mjc5OWJhMS1jNzIwLTE5NGEtYTc1Ny1jNWIxODYyNTE2ZTciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5GhQdBAAAFFklEQVR42uyc3VKzQAyGt5FWbXX0wBnv/7r0Bjzx31Zb234vBCNdYMlXgULJHnSg0JB9Jhv27+3o/v5+u926YDk7Ozs5OQnfAyOLxaIuU5+fn5vNJnzb6elpFEW1mJpMJuPx2FUVMlJKUjBFRkpJar1ek5FSkoqboZFSkiqFZaTypIphGalCUgWwjFQZKR+WkQqQ2oFlpMKkfmEZqUpSKSwjpSEVwzJSSlIxLCOlJAVT0RGT0pjSkwJ0MlJKUqGxoZHKN2QyUvqUR0ZK/3KIhkYKpr6+vvYg5UeWkQp3OH6twxv4ZKQCXbOoaVK3t7fZq+/v7x8fH3uQms1mFxcX2asPDw9iHHd+f3+DRXOkUlhNxxROxUt+yt4xBSKenzjFPXAMlcTBarVqiFQMq4XWBy8fHx9raX0ITC98cA/yLAzCw9Fo1BypGFb7eQpuERG8h038iquBY1R1kxQ2xTfjs6xx8dWm89QOrBZIgQJXDA7hTkQBnGNY+MQPs49A3V5fX/HN5eWlNL2np6fU3Z+QpKTIl4VVrZcU/IxaiClU5vr6WtqREFwul8wOj+C8BqfhOo6n02nqX1LOz8/5V5Ljl0nhkGQPOcc3RwqmohZaHx6DvCuBILXlusFdPuXczK7jubj68vKCkBTQ7DSHlTwRB2wHn/JlE6QKevBN5CmuSfgGbpJZoAg9dBe8VwHuyb8NOcQajani4U4TpDRlnBQPn9exkohrLaN7Q8io6XefEhZymUcBp5LgcJwH1zIpt/cia41DEE5VXE88HU1PmiF3GmZJ8VJe+6T8yDrIuI8TPDoKeANy5uJQws9vbm7Yn8rHtUDK7bHIWvsIGZ/z+ZyHLPwGxFV0tXDMvdZVUg5OKg72u7u7vs8ltLbMEzlbZFVPn9oi639MNNsiq5ZUxbqhkcqSiidLjJSSlDvWRdYmSJWODY1UoSkyUnpTZKT0pshI6U2RkdKbIiOlN0VGSm+KjJTeFBkp176S9ehJtbTIepBJwdpJ1aNkHQgp93cl63BIuT8qWQdFyv1FyTo0Uq4Li6x9IeX2U7IOk9TO5N+QtyEroZOR0ocnGSl9QyYjpU95ZKRcjYusRsopF1mNlFMushopV7nIOkmKS3bj8TdZSRFvP3t7e+s1Kd6hKvtURX4VIOUCW7vzkiLZ1z+dTtdJ6W9MuSL5VZiUK1SyrlYr3JSXFLFeCV2Nq6srGCpUFfWl9SGmPPlVJakUFqrNHQhggiHRfpT57RKNw5HlKRCAJyAQdxF+hEFZ+VUMC9dktzqOWe/hMpIitEe2znol2Xrdd1Iiv3KJugotBuHGu6QL5VfgmOqpWFuDa3lJkSQ/0St5kqKexlRWfoU3WNpHJyqTX8WwWPr3/PyMrzxJkQiIJCPmJUX9bX04XSwW3m15+RVOOYx+EzwCyvMe1r0En5cU9TpPwc9sd6Fw2Ac/QUpeZZErkRR5k4It56n2t/eVwfLfhp6kyEMzqI2Q+VYpniDSye1Kijwd15BJyauM1bTxgScpkq7DwEmxG3Cbu13pIqtIinB5npRwMz4aUmhPgZgCE/QV4BVIifwqFTrlM/qQW58UZKdsjzIaICmlKY9UASwjFTBFRkpvioyU3hQZKb0pMlJ6U2Sk9KbISLn+LrJ2llTnFlm7TMp1apG146Rc4O+CjVR+CElGSj/Yjg5OqjtbRiunJchI6SdwyEjpp7rISOknBclIKUmlCX6blE6ROuymtbLyT4ABAI0sAxAZwQU9AAAAAElFTkSuQmCC);
    background-position: 0 0;
    background-repeat: repeat;
    z-index: 999999;
    position: relative;
}
</style></head>
<body>
  <noscript>&lt;br/&gt;&lt;br/&gt;You must have Javascript enabled to view this site.</noscript>
<div id="page" style="font-size: 2.3em; visibility: visible;">
<div id="header">
	<div id="header_container">
		<h1><a href="http://gormanalysis.com/">GormAnalysis</a></h1>
		<div class="description">Big Data ~ Predictive Modeling ~ Actuarial Science</div>
		<div id="search">
			    <form id="searchform" method="get" action="http://gormanalysis.com/index.php">
      <div>
         <div id="searchfield_wrapper">
           <div id="searchfield_padding">
            <input type="text" name="s" id="s" placeholder="Search">
            </div>
         </div>
         <input id="search_submit" type="image" src="./R – Data.Table Rolling Joins « GormAnalysis_files/search.gif">
      </div>
     </form>		</div>
	</div>
</div>
<div id="navigation">
<ul class="clearfix"><li class="page_item current_page_item"><a title="Blog" href="http://gormanalysis.com/">Blog</a></li><li class="page_item page-item-2"><a href="http://gormanalysis.com/about/">About</a></li>
</ul></div>
<div id="container">

	<div id="content" class="single">

	
		<div class="post-176 post type-post status-publish format-standard hentry category-r" id="post-176">
			<h2 class="article_view_header">R – Data.Table Rolling&nbsp;Joins</h2>

			<div class="entry">
				<p>Rolling joins are commonly used for analyzing data involving time. A simple example – suppose you have a table of product sales and a table of commercials. You might want to associate each product sale with the most recent commercial that aired prior to the sale. In this case, you cannot do a basic join between the sales table and the commercials table because each sale was NOT tracked with a commercialID attribute. Instead, you need to generate a mapping between sales and commercials based on logic involving their dates.</p>
<p><span id="more-176"></span></p>
<div><div id="highlighter_634428" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">sales&lt;-</code><code class="r functions">data.table</code><code class="r plain">(saleID=</code><code class="r functions">c</code><code class="r plain">(</code><code class="r string">"S1"</code><code class="r plain">,</code><code class="r string">"S2"</code><code class="r plain">,</code><code class="r string">"S3"</code><code class="r plain">,</code><code class="r string">"S4"</code><code class="r plain">,</code><code class="r string">"S5"</code><code class="r plain">), </code></div><div class="line number2 index1 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">saleDate=</code><code class="r functions">as.Date</code><code class="r plain">(</code><code class="r functions">c</code><code class="r plain">(</code><code class="r string">"2014-2-20"</code><code class="r plain">,</code><code class="r string">"2014-5-1"</code><code class="r plain">,</code><code class="r string">"2014-6-15"</code><code class="r plain">,</code><code class="r string">"2014-7-1"</code><code class="r plain">,</code><code class="r string">"2014-12-31"</code><code class="r plain">)))</code></div><div class="line number3 index2 alt2"><code class="r plain">sales</code></div><div class="line number4 index3 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;</code><code class="r plain">saleID&nbsp;&nbsp; saleDate</code></div><div class="line number5 index4 alt2"><code class="r plain">1:&nbsp;&nbsp;&nbsp;&nbsp; S1 2014-02-20</code></div><div class="line number6 index5 alt1"><code class="r plain">2:&nbsp;&nbsp;&nbsp;&nbsp; S2 2014-05-01</code></div><div class="line number7 index6 alt2"><code class="r plain">3:&nbsp;&nbsp;&nbsp;&nbsp; S3 2014-06-15</code></div><div class="line number8 index7 alt1"><code class="r plain">4:&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01</code></div><div class="line number9 index8 alt2"><code class="r plain">5:&nbsp;&nbsp;&nbsp;&nbsp; S5 2014-12-31</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="r plain">commercials&lt;-</code><code class="r functions">data.table</code><code class="r plain">(commercialID=</code><code class="r functions">c</code><code class="r plain">(</code><code class="r string">"C1"</code><code class="r plain">,</code><code class="r string">"C2"</code><code class="r plain">,</code><code class="r string">"C3"</code><code class="r plain">,</code><code class="r string">"C4"</code><code class="r plain">), </code></div><div class="line number12 index11 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">commercialDate=</code><code class="r functions">as.Date</code><code class="r plain">(</code><code class="r functions">c</code><code class="r plain">(</code><code class="r string">"2014-1-1"</code><code class="r plain">,</code><code class="r string">"2014-4-1"</code><code class="r plain">,</code><code class="r string">"2014-7-1"</code><code class="r plain">,</code><code class="r string">"2014-9-15"</code><code class="r plain">)))</code></div><div class="line number13 index12 alt2"><code class="r plain">commercials</code></div><div class="line number14 index13 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;</code><code class="r plain">commercialID commercialDate</code></div><div class="line number15 index14 alt2"><code class="r plain">1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C1&nbsp;&nbsp;&nbsp;&nbsp; 2014-01-01</code></div><div class="line number16 index15 alt1"><code class="r plain">2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01</code></div><div class="line number17 index16 alt2"><code class="r plain">3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01</code></div><div class="line number18 index17 alt1"><code class="r plain">4:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4&nbsp;&nbsp;&nbsp;&nbsp; 2014-09-15</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="r functions">setkey</code><code class="r plain">(sales,</code><code class="r string">"saleDate"</code><code class="r plain">)</code></div><div class="line number21 index20 alt2"><code class="r functions">setkey</code><code class="r plain">(commercials,</code><code class="r string">"commercialDate"</code><code class="r plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>Note: If you do a rolling join involving a multi-column key, the roll column should be the last keyed column.</p>
<p>Before we answer the problem stated above, let’s analyze the behavior of the default rolling join in R’s data.table package.</p>
<div><div id="highlighter_557447" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">sales[commercials, roll=</code><code class="r keyword">TRUE</code><code class="r plain">]</code></div><div class="line number2 index1 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">saleDate saleID commercialID</code></div><div class="line number3 index2 alt2"><code class="r plain">1: 2014-01-01&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="r keyword">NA</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="r plain">C1</code></div><div class="line number4 index3 alt1"><code class="r plain">2: 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2</code></div><div class="line number5 index4 alt2"><code class="r plain">3: 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3</code></div><div class="line number6 index5 alt1"><code class="r plain">4: 2014-09-15&nbsp;&nbsp;&nbsp;&nbsp; S4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4</code></div></div></td></tr></tbody></table></div></div>
<p>What just occurred is best described graphically.</p>
<p><a href="./R – Data.Table Rolling Joins « GormAnalysis_files/roll1.gif"><img src="./R – Data.Table Rolling Joins « GormAnalysis_files/roll1.gif" alt="roll1" width="600" height="447" class="alignnone size-full wp-image-198"></a></p>
<p>data.table is associating each commercial with the most recent sale prior to the commercial date (and including the commercial date). In other words, the most recent sale prior to each commercial is said to roll forwards, and the saleDate is mapped to the commercialDate. Notice that sale S4 was the most recent sale prior to commercial C3 <em>and</em> C4, so S4 appears twice in the resultant table.</p>
<p>If you don’t want to lose the original saleDate column, you may prefer to create a designated rollDate column for your rolling join. I’m going to use this convention going forward.</p>
<div><div id="highlighter_711032" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">sales[, rollDate:=saleDate] </code><code class="r comments">#Add a column, rollDate equal to saleDate</code></div><div class="line number2 index1 alt1"><code class="r plain">commercials[, rollDate:=commercialDate] </code><code class="r comments">#Add a column, rollDate equal to commercialDate</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="r functions">setkey</code><code class="r plain">(sales, </code><code class="r string">"rollDate"</code><code class="r plain">)</code></div><div class="line number5 index4 alt2"><code class="r functions">setkey</code><code class="r plain">(commercials, </code><code class="r string">"rollDate"</code><code class="r plain">)</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="r plain">sales[commercials, roll=</code><code class="r keyword">TRUE</code><code class="r plain">]</code></div><div class="line number8 index7 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">rollDate saleID&nbsp;&nbsp; saleDate commercialID commercialDate</code></div><div class="line number9 index8 alt2"><code class="r plain">1: 2014-01-01&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="r keyword">NA</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="r plain">&lt;</code><code class="r keyword">NA</code><code class="r plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C1&nbsp;&nbsp;&nbsp;&nbsp; 2014-01-01</code></div><div class="line number10 index9 alt1"><code class="r plain">2: 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S1 2014-02-20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01</code></div><div class="line number11 index10 alt2"><code class="r plain">3: 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01</code></div><div class="line number12 index11 alt1"><code class="r plain">4: 2014-09-15&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4&nbsp;&nbsp;&nbsp;&nbsp; 2014-09-15</code></div></div></td></tr></tbody></table></div></div>
<p>Now let’s see what happens when we join the commercials to the sales.</p>
<div><div id="highlighter_7183" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">commercials[sales, roll=</code><code class="r keyword">TRUE</code><code class="r plain">]</code></div><div class="line number2 index1 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">rollDate commercialID commercialDate saleID&nbsp;&nbsp; saleDate</code></div><div class="line number3 index2 alt2"><code class="r plain">1: 2014-02-20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C1&nbsp;&nbsp;&nbsp;&nbsp; 2014-01-01&nbsp;&nbsp;&nbsp;&nbsp; S1 2014-02-20</code></div><div class="line number4 index3 alt1"><code class="r plain">2: 2014-05-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S2 2014-05-01</code></div><div class="line number5 index4 alt2"><code class="r plain">3: 2014-06-15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S3 2014-06-15</code></div><div class="line number6 index5 alt1"><code class="r plain">4: 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01</code></div><div class="line number7 index6 alt2"><code class="r plain">5: 2014-12-31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4&nbsp;&nbsp;&nbsp;&nbsp; 2014-09-15&nbsp;&nbsp;&nbsp;&nbsp; S5 2014-12-31</code></div></div></td></tr></tbody></table></div></div>
<p>What it’s doing…</p>
<p><a href="./R – Data.Table Rolling Joins « GormAnalysis_files/roll2.gif"><img src="./R – Data.Table Rolling Joins « GormAnalysis_files/roll2.gif" alt="roll2" width="600" height="447" class="alignnone size-full wp-image-199"></a></p>
<p>Here data.table is associating each sale with the most recent commercial prior to the saleDate. Did you notice this is the solution to our originally stated problem?</p>
<p>data.table also allows backward rolling joins by setting the roll argument to -Inf</p>
<div><div id="highlighter_500123" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">sales[commercials, roll=-</code><code class="r keyword">Inf</code><code class="r plain">]</code></div><div class="line number2 index1 alt1"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">rollDate saleID&nbsp;&nbsp; saleDate commercialID commercialDate</code></div><div class="line number3 index2 alt2"><code class="r plain">1: 2014-01-01&nbsp;&nbsp;&nbsp;&nbsp; S1 2014-02-20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C1&nbsp;&nbsp;&nbsp;&nbsp; 2014-01-01</code></div><div class="line number4 index3 alt1"><code class="r plain">2: 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S2 2014-05-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01</code></div><div class="line number5 index4 alt2"><code class="r plain">3: 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01</code></div><div class="line number6 index5 alt1"><code class="r plain">4: 2014-09-15&nbsp;&nbsp;&nbsp;&nbsp; S5 2014-12-31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4&nbsp;&nbsp;&nbsp;&nbsp; 2014-09-15</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="r plain">commercials[sales, roll=-</code><code class="r keyword">Inf</code><code class="r plain">]</code></div><div class="line number9 index8 alt2"><code class="r spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="r plain">rollDate commercialID commercialDate saleID&nbsp;&nbsp; saleDate</code></div><div class="line number10 index9 alt1"><code class="r plain">1: 2014-02-20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01&nbsp;&nbsp;&nbsp;&nbsp; S1 2014-02-20</code></div><div class="line number11 index10 alt2"><code class="r plain">2: 2014-05-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S2 2014-05-01</code></div><div class="line number12 index11 alt1"><code class="r plain">3: 2014-06-15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S3 2014-06-15</code></div><div class="line number13 index12 alt2"><code class="r plain">4: 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01</code></div><div class="line number14 index13 alt1"><code class="r plain">5: 2014-12-31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="r keyword">NA</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="r plain">&lt;</code><code class="r keyword">NA</code><code class="r plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp; S5 2014-12-31</code></div></div></td></tr></tbody></table></div></div>
<p>The above tools should provide you with the ability to solve the majority of your rolling join needs.  However, I encourage you to read the docs for data.table as there are some other cool features for rolling joins.  Specifically, you can </p>
<ul>
<li>provide a positive/negative value to the roll argument, which will perform a forward/backward rolling join, only associating dates within <em>n</em> days of each other</li>
<li>roll dates to their nearest neighbor as opposed to a one-way (forward or backward) rolling join</li>
<li>specify the behavior of the end points in a rolling join (see the rollends argument)</li>
</ul>
<p><br><br>
<strong>Challenge</strong><br>
Remove sale S1 from the sales table.</p>
<div><div id="highlighter_202904" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r plain">sales&lt;-sales[saleID!=</code><code class="r string">"S1"</code><code class="r plain">]</code></div></div></td></tr></tbody></table></div></div>
<p>Now build a table that has each commercial and all sales that occurred after (and on) the commercialDate, but before the next commercial. In other words, try to build this table that will allow you to analyze the performance of each commercial.</p>
<div><div id="highlighter_354601" class="syntaxhighlighter  r"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="r spaces">&nbsp;&nbsp;&nbsp;</code><code class="r plain">commercialID saleID&nbsp;&nbsp; saleDate commercialDate</code></div><div class="line number2 index1 alt1"><code class="r plain">1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C1&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="r keyword">NA</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="r plain">&lt;</code><code class="r keyword">NA</code><code class="r plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp; 2014-01-01</code></div><div class="line number3 index2 alt2"><code class="r plain">2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; S2 2014-05-01&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01</code></div><div class="line number4 index3 alt1"><code class="r plain">3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C2&nbsp;&nbsp;&nbsp;&nbsp; S3 2014-06-15&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-01</code></div><div class="line number5 index4 alt2"><code class="r plain">4:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C3&nbsp;&nbsp;&nbsp;&nbsp; S4 2014-07-01&nbsp;&nbsp;&nbsp;&nbsp; 2014-07-01</code></div><div class="line number6 index5 alt1"><code class="r plain">5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C4&nbsp;&nbsp;&nbsp;&nbsp; S5 2014-12-31&nbsp;&nbsp;&nbsp;&nbsp; 2014-09-15</code></div></div></td></tr></tbody></table></div></div>

								
				<div class="single_meta">
				Posted Saturday, July 26th, 2014 under <a href="http://gormanalysis.com/category/r/" rel="category tag">R</a>.<br>
				<div class="tags"></div>
        </div>
			</div>
		</div>

	
<!-- You can start editing here. -->

	<h3 id="comments">4 comments</h3>

	<ol class="commentlist">
	   <li class="comment even thread-even depth-1" id="li-comment-3">
     <div id="comment-3">
       <div class="comment_header clearfix">
      <div class="comment-author vcard">
        
        
         <img alt="" src="./R – Data.Table Rolling Joins « GormAnalysis_files/dd3074ef748cab14f90eb123b735839a" class="avatar avatar-48 photo" height="48" width="48">
         <cite class="fn"><a href="http://genomics.nchresearch.org/" rel="external nofollow" class="url">Peter White</a></cite> <span class="says">says:</span>      </div>
      
      <div class="comment-meta commentmetadata"><a href="http://gormanalysis.com/r-data-table-rolling-joins/#comment-3">August 13, 2014 at 8:46 pm</a></div>
      
      </div>
      <div class="comment-full-text">
      <p>Great explanation of a really complicated, but powerful function in data.table. The graphics did a very nice job of visualizing what is going on. Thank you!</p>
      </div>

     </div>
<ul class="children">
   <li class="comment byuser comment-author-ben51992 bypostauthor odd alt depth-2" id="li-comment-4">
     <div id="comment-4">
       <div class="comment_header clearfix">
      <div class="comment-author vcard">
        
        
         <img alt="" src="./R – Data.Table Rolling Joins « GormAnalysis_files/1fe765256b6985ff92d0554dbcf021aa" class="avatar avatar-48 photo" height="48" width="48">
         <cite class="fn"><a href="http://gormanalysis.com/" rel="external nofollow" class="url">Ben</a></cite> <span class="says">says:</span>      </div>
      
      <div class="comment-meta commentmetadata"><a href="http://gormanalysis.com/r-data-table-rolling-joins/#comment-4">August 13, 2014 at 10:52 pm</a></div>
      
      </div>
      <div class="comment-full-text">
      <p>Peter, you are the first person to comment on my blog.  Thanks for the support.</p>
      </div>

     </div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
   <li class="comment even thread-odd thread-alt depth-1" id="li-comment-18">
     <div id="comment-18">
       <div class="comment_header clearfix">
      <div class="comment-author vcard">
        
        
         <img alt="" src="./R – Data.Table Rolling Joins « GormAnalysis_files/55ac4e8e380e7621a7aa8004c55e18d1" class="avatar avatar-48 photo" height="48" width="48">
         <cite class="fn">Jesús Loredo</cite> <span class="says">says:</span>      </div>
      
      <div class="comment-meta commentmetadata"><a href="http://gormanalysis.com/r-data-table-rolling-joins/#comment-18">October 26, 2014 (5 weeks ago) at 3:41 am</a></div>
      
      </div>
      <div class="comment-full-text">
      <p>Una explicación muy agradable, en especial por las animaciones, muhas gracias. </p>
<p>Llegue aquí mientras me documentaba en google, y creo que leeré algunas entradas (empezando por Magic Behind Constructing a Decision Tree,)</p>
<p>personalmente me encantaria ver material de Acturia y analisis multivariante, </p>
<p>Felicidades por el Blog, espero no lo abandones, </p>
<p>Saludos desde México,</p>
      </div>

     </div>
</li><!-- #comment-## -->
   <li class="comment odd alt thread-even depth-1" id="li-comment-20">
     <div id="comment-20">
       <div class="comment_header clearfix">
      <div class="comment-author vcard">
        
        
         <img alt="" src="./R – Data.Table Rolling Joins « GormAnalysis_files/9abe8abe7d762368f15186fe33fcfe2b" class="avatar avatar-48 photo" height="48" width="48">
         <cite class="fn">Gentry</cite> <span class="says">says:</span>      </div>
      
      <div class="comment-meta commentmetadata"><a href="http://gormanalysis.com/r-data-table-rolling-joins/#comment-20">November 11, 2014 (2 weeks ago) at 6:08 pm</a></div>
      
      </div>
      <div class="comment-full-text">
      <p>Great, intuitive example to demonstrate this highly useful feature of data.table! Kudos to you!</p>
      </div>

     </div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
 


<div id="respond">

<h3>Leave a Reply</h3>

<div class="cancel-comment-reply">
	<small><a rel="nofollow" id="cancel-comment-reply-link" href="http://gormanalysis.com/r-data-table-rolling-joins/#respond" style="display:none;">Click here to cancel reply.</a></small>
</div>


<form action="http://gormanalysis.com/wp-comments-post.php" method="post" id="commentform" class="clearfix">

<div id="identity_fields">
<div class="input_group">
<div class="input_wrapper"><input type="text" name="author" id="author" value="" tabindex="1" aria-required="true"></div>
<label for="author"><small>Name</small></label>
</div>
<div class="input_group">
<div class="input_wrapper"><input type="text" name="email" id="email" value="" tabindex="2" aria-required="true"></div>
<label for="email"><small>Mail</small></label>
</div>
<div class="input_group">
<div class="input_wrapper"><input type="text" name="url" id="url" value="" tabindex="3"></div>
<label for="url"><small>Website</small></label>
</div>
</div>

 

<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></small></p>-->

<div class="textarea_wrapper"><textarea name="comment" id="comment" rows="10" tabindex="4"></textarea></div>
<div class="submit_wrapper">
<input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment">
<div class="submit_wrapper">
<input type="hidden" name="comment_post_ID" value="176" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">




</div>


	
	</div></form>
</div></div>



</div>
<div id="footer" class="clearfix">
  <a href="http://robgoodlatte.com/" id="attribution">Theme design by <img src="./R – Data.Table Rolling Joins « GormAnalysis_files/attribution.gif" alt="Theme Design by Rob Goodlatte"></a>&nbsp;&nbsp; Powered by <a href="http://wordpress.org/">WordPress</a>
		<script type="text/javascript" src="./R – Data.Table Rolling Joins « GormAnalysis_files/shCore.js"></script>
<script type="text/javascript" src="./R – Data.Table Rolling Joins « GormAnalysis_files/shBrushR.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://gormanalysis.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://gormanalysis.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./R – Data.Table Rolling Joins « GormAnalysis_files/comment-reply.min.js"></script>
</div>
</div>




<div><div id="SL_button" class="ImTranslatorLogo"></div><div id="SL_shadow_translation_result2" style="display: none;"></div><div id="SL_shadow_translator" style="display: none;"><div id="SL_planshet"><div id="SL_TB"><div class="ImTranslatorLogo"></div><table cellspacing="1" border="0" id="SL_tables"><tbody><tr><td class="SL_td" align="left" width="20%"><div id="SL_lng_from">English&nbsp;»</div></td><td class="SL_td" align="left" width="20%"><div id="SL_to_"><div id="SL_tocurlng" style="margin-left:5px;">Georgian</div><div class="SL_arrow"></div><div id="SL_to_list" style="display=" none'=""><div class="SL_DDMENU"><div id="SL_af" class="SL_limenu">Afrikaans</div><div id="SL_sq" class="SL_limenu">Albanian</div><div id="SL_ar" class="SL_limenu">Arabic</div><div id="SL_hy" class="SL_limenu">Armenian</div><div id="SL_az" class="SL_limenu">Azerbaijani</div><div id="SL_eu" class="SL_limenu">Basque</div><div id="SL_bn" class="SL_limenu">Bengali</div><div id="SL_be" class="SL_limenu">Belarusian</div><div id="SL_bg" class="SL_limenu">Bulgarian</div><div id="SL_ca" class="SL_limenu">Catalan</div><div id="SL_zh_CN" class="SL_limenu">Chinese&nbsp;(Simp)</div><div id="SL_zh_TW" class="SL_limenu">Chinese&nbsp;(Trad)</div><div id="SL_hr" class="SL_limenu">Croatian</div><div id="SL_cs" class="SL_limenu">Czech</div><div id="SL_da" class="SL_limenu">Danish</div><div id="SL_nl" class="SL_limenu">Dutch</div><div id="SL_en" class="SL_limenu">English</div><div id="SL_eo" class="SL_limenu">Esperanto</div><div id="SL_et" class="SL_limenu">Estonian</div><div id="SL_tl" class="SL_limenu">Filipino</div><div id="SL_fi" class="SL_limenu">Finnish</div><div id="SL_fr" class="SL_limenu">French</div><div id="SL_gl" class="SL_limenu">Galician</div><div id="SL_ka" class="SL_limenu">Georgian</div><div id="SL_de" class="SL_limenu">German</div><div id="SL_el" class="SL_limenu">Greek</div><div id="SL_gu" class="SL_limenu">Gujarati</div><div id="SL_ht" class="SL_limenu">Haitian&nbsp;Creole</div><div id="SL_iw" class="SL_limenu">Hebrew</div><div id="SL_hi" class="SL_limenu">Hindi</div><div id="SL_hu" class="SL_limenu">Hungarian</div><div id="SL_is" class="SL_limenu">Icelandic</div><div id="SL_id" class="SL_limenu">Indonesian</div><div id="SL_ga" class="SL_limenu">Irish</div><div id="SL_it" class="SL_limenu">Italian</div><div id="SL_ja" class="SL_limenu">Japanese</div><div id="SL_kn" class="SL_limenu">Kannada</div><div id="SL_ko" class="SL_limenu">Korean</div><div id="SL_lo" class="SL_limenu">Lao</div><div id="SL_la" class="SL_limenu">Latin</div><div id="SL_lv" class="SL_limenu">Latvian</div><div id="SL_lt" class="SL_limenu">Lithuanian</div><div id="SL_mk" class="SL_limenu">Macedonian</div><div id="SL_ms" class="SL_limenu">Malay</div><div id="SL_mt" class="SL_limenu">Maltese</div><div id="SL_no" class="SL_limenu">Norwegian</div><div id="SL_fa" class="SL_limenu">Persian</div><div id="SL_pl" class="SL_limenu">Polish</div><div id="SL_pt" class="SL_limenu">Portuguese</div><div id="SL_ro" class="SL_limenu">Romanian</div><div id="SL_ru" class="SL_limenu">Russian</div><div id="SL_sr" class="SL_limenu">Serbian</div><div id="SL_sk" class="SL_limenu">Slovak</div><div id="SL_sl" class="SL_limenu">Slovenian</div><div id="SL_es" class="SL_limenu">Spanish</div><div id="SL_sw" class="SL_limenu">Swahili</div><div id="SL_sv" class="SL_limenu">Swedish</div><div id="SL_ta" class="SL_limenu">Tamil</div><div id="SL_te" class="SL_limenu">Telugu</div><div id="SL_th" class="SL_limenu">Thai</div><div id="SL_tr" class="SL_limenu">Turkish</div><div id="SL_uk" class="SL_limenu">Ukrainian</div><div id="SL_ur" class="SL_limenu">Urdu</div><div id="SL_vi" class="SL_limenu">Vietnamese</div><div id="SL_cy" class="SL_limenu">Welsh</div><div id="SL_yi" class="SL_limenu">Yiddish</div></div></div></div><select id="SL_lng_to"><option value="af">Afrikaans</option><option value="sq">Albanian</option><option value="ar">Arabic</option><option value="hy">Armenian</option><option value="az">Azerbaijani</option><option value="eu">Basque</option><option value="bn">Bengali</option><option value="be">Belarusian</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="zh-CN">Chinese&nbsp;(Simp)</option><option value="zh-TW">Chinese&nbsp;(Trad)</option><option value="hr">Croatian</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="tl">Filipino</option><option value="fi">Finnish</option><option value="fr">French</option><option value="gl">Galician</option><option value="ka">Georgian</option><option value="de">German</option><option value="el">Greek</option><option value="gu">Gujarati</option><option value="ht">Haitian&nbsp;Creole</option><option value="iw">Hebrew</option><option value="hi">Hindi</option><option value="hu">Hungarian</option><option value="is">Icelandic</option><option value="id">Indonesian</option><option value="ga">Irish</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="kn">Kannada</option><option value="ko">Korean</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="mk">Macedonian</option><option value="ms">Malay</option><option value="mt">Maltese</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sr">Serbian</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option selected="" value="es">Spanish</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="ta">Tamil</option><option value="te">Telugu</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="vi">Vietnamese</option><option value="cy">Welsh</option><option value="yi">Yiddish</option></select></td><td class="SL_td" width="13%" align="center">&nbsp;</td><td class="SL_td" width="8%" align="center"><div id="SL_TTS_voice" title=""></div></td><td class="SL_td" width="8%" align="center"><div class="SL_copy_hand" id="SL_copy" title="Select text"></div></td><td class="SL_td" width="8%" align="center"><div class="SL_font_off" id="SL_bbl_font" title="Font size"></div></td><td class="SL_td" width="5%"></td><td class="SL_td" width="8%" align="right"><div class="SL_pin_off" id="SL_pin" title="Pin pup-up bubble"></div></td></tr></tbody></table></div></div><div id="SL_shadow_translation_result"></div><div id="SL_bbl_donate" title="Make a small contribution"></div><div id="SL_Balloon_options"><a href="chrome-extension://pcfaommkmdjacdkbaoohklbccfmbnnod/options-bbl.html" target="_blank" class="SL_options" title="Show options">Options</a></div></div></div><script id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ d.innerText=i; } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }}catch(e){}</script></body></html>